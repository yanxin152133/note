# 1. 生产部署
## 1.1. vite.config.js
```js
import {fileURLToPath, URL} from 'node:url'

import {defineConfig} from 'vite'
import vue from '@vitejs/plugin-vue'

// https://vitejs.dev/config/
export default defineConfig({
    plugins: [
        vue(),
    ],
    resolve: {
        alias: {
            '@': fileURLToPath(new URL('./src', import.meta.url))
        }
    },
    server: {
        host: '0.0.0.0'
    },
    base: process.env.NODE_ENV === "development" ? "/" : "/cyx/" , // 默认 '/'
    build:{
        outDir: 'cyx', // 默认是 'dist'  
    }
})
```

## 1.2. src/router/index.js
```js
import { createRouter, createWebHistory } from 'vue-router'
import HomeView from '../views/HomeView.vue'

const base = (process.env.NODE_ENV === "development" ? "/" : "/cyx/");      // 修改
const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: [
    {
      path: '/',
      name: 'home',
      component: HomeView
    }
  ]
})

export default router

```

## 1.3. nginx.conf
```conf

user  nginx;
worker_processes  auto;

error_log  /var/log/nginx/error.log notice;
pid        /var/run/nginx.pid;


events {
    worker_connections  1024;
}


http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    keepalive_timeout  65;

    #gzip  on;

    include /etc/nginx/conf.d/*.conf;
    server {
    listen 80;
    server_name localhost;

    location / {
        root html;
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    location /cyx {
        alias html/cyx/;
        index index.html;
        try_files $uri $uri/ /index.html;
    }
}
}


```

## 1.4. npm
```bash
npm run build
```