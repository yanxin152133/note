## **文件权限**
### chmod
>用来变更文件或目录的权限。
             
**概要：**
          
```html
chmod [OPTION]... MODE[,MODE]... FILE...
chmod [OPTION]... OCTAL-MODE FILE...
chmod [OPTION]... --reference=RFILE FILE...
```
           
**主要用途：**
          
- 通过符号组合的方式更改目标文件或目录的权限。
- 通过八进制数的方式更改目标文件或目录的权限。
- 通过参考文件的权限来更改目标文件或目录的权限。
         
**参数：**
          
mode：八进制数或符号组合。
file：指定要更改权限的一到多个文件。
           
**选项：**
           
```html
-c, --changes：当文件的权限更改时输出操作信息。
--no-preserve-root：不将'/'特殊化处理，默认选项。
--preserve-root：不能在根目录下递归操作。
-f, --silent, --quiet：抑制多数错误消息的输出。
-v, --verbose：无论文件是否更改了权限，一律输出操作信息。
--reference=RFILE：使用参考文件或参考目录RFILE的权限来设置目标文件或目录的权限。
-R, --recursive：对目录以及目录下的文件递归执行更改权限操作。
--help：显示帮助信息并退出。
--version：显示版本信息并退出。
```
        
**返回值：**
        
返回状态为成功除非给出了非法选项或非法参数。
         
**相关说明：**
          
- u符号代表当前用户。
- g符号代表和当前用户在同一个组的用户，以下简称组用户。
- o符号代表其他用户。
- a符号代表所有用户。
- r符号代表读权限以及八进制数4。
- w符号代表写权限以及八进制数2。
- x符号代表执行权限以及八进制数1。
- X符号代表如果目标文件是可执行文件或目录，可给其设置可执行权限。
- s符号代表设置权限suid和sgid，使用权限组合u+s设定文件的用户的ID位，g+s设置组用户ID位。
- t符号代表只有目录或文件的所有者才可以删除目录下的文件。
- +符号代表添加目标用户相应的权限。
- -符号代表删除目标用户相应的权限。
- =符号代表添加目标用户相应的权限，删除未提到的权限。
            
```bash
linux文件的用户权限说明：

# 查看当前目录（包含隐藏文件）的长格式。
ls -la
  -rw-r--r--   1 user  staff   651 Oct 12 12:53 .gitmodules

# 第1位如果是d则代表目录，是-则代表普通文件。
# 更多详情请参阅info coreutils 'ls invocation'（ls命令的info文档）的'-l'选项部分。
# 第2到4位代表当前用户的权限。
# 第5到7位代表组用户的权限。
# 第8到10位代表其他用户的权限。
```
         
**常用命令：**
         
1. 添加组用户的写权限。
          
```bash
chmod g+w ./test.log
```
          
2. 删除其他用户的所有权限。
              
```bash
chmod o= ./test.log
```
         
3. 使得所有用户都没有写的权限。
         
```bash
chmod a-w ./test.log
```
          
4. 当前用户拥有所有权限，组用户有读写权限，其他用户只有读权限。
          
```bash
chmod u=rwx, g=rw, o=r ./test.log

## 等价的八进制数表示
chmod 764 ./test.log
```
         
5. 将目录以及目录下的文件都设置为所有用户拥有读写权限。
        
```bash
# 注意，使用'-R'选项一定要保留当前用户的执行和读取权限，否则会报错！
chmod -R a=rw ./testdir/
```
             
6. 根据其他文件的权限设置文件权限。
            
```bash
chmod --reference=./1.log  ./test.log
```
         
### chown
>用来变更文件或目录的拥有者或所属群组。
        
chown命令改变某个文件或目录的所有者和所属的组，该命令可以向某个用户授权，使该用户变成指定文件的所有者或改变文件所属的组。用户可以是用户或者是用户id，用户组可以是组名或组id。文件名可以使由空格分开的文件列表，在文件名中可以包含通配符。
              
只有文件主和超级用户才可以使用该命令。

**语法：**

```html
chown(选项)(参数)
```
            
**选项：**
         
```html
-c或——changes：效果类似“-v”参数，但仅回报更改的部分；
-f或--quite或——silent：不显示错误信息；
-h或--no-dereference：只对符号连接的文件作修改，而不更改其他任何相关文件；
-R或——recursive：递归处理，将指定目录下的所有文件及子目录一并处理；
-v或——version：显示指令执行过程；
--dereference：效果和“-h”参数相同；
--help：在线帮助；
--reference=<参考文件或目录>：把指定文件或目录的拥有者与所属群组全部设成和参考文件或目录的拥有者与所属群组相同；
--version：显示版本信息。
```
          
**参数：**
           
用户：组：指定所有者和所属工作组。当省略“:组”，仅改变文件所有者。
        
文件：指定要改变所有者和工作组的文件列表。支持多个文件和目标，支持shell通配符。
         
**常用命令：**
          
1. 将目录/usr/meng及其下面的所有文件、子目录的文件主改成liu。
          
```bash
chown -R liu /usr/meng
```