## **打包和压缩**
>[Linux tar.gz、tar、bz2、zip 等解压缩、压缩命令详解](https://www.runoob.com/w3cnote/linux-tar-gz.html)
         
### tar
>Linux下的归档使用工具，用来打包和备份。
            
tar命令可以为Linux的文件和目录创建档案。利用tar，可以为某一特定文件创建档案（备份文件），也可以在档案中改变文件，或者向档案中加入新的文件。tar最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案。利用tar命令，可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。
           
首先要弄清两个概念：打包和压缩。打包是指将一大堆文件或目录变成一个总的文件；压缩则是将一个大的文件通过一些压缩算法变成一个文件。
           
区分这两个概念的原因：这源于Linux中很多压缩程序只能针对一个文件进行压缩，这样当你想要压缩一大堆文件时，你得先将这一大堆文件先打成一个包（tar命令），然后再用压缩程序进行压缩（gzip bzip2命令）。
                
**语法：**
             
```html
tar (选项) (参数)
```
          
**选项：**
           
```html
-A或--catenate：新增文件到以存在的备份文件；
-B：设置区块大小；
-c或--create：建立新的备份文件；
-C <目录>：切换工作目录，先进入指定目录再执行压缩/解压缩操作，可用于仅压缩特定目录里的内容或解压缩到特定目录；
-d：记录文件的差别；
-x或--extract或--get：从归档文件中提取文件，可以搭配-C（大写）在特定目录解开，
                     需要注意的是-c、-t、-x不可同时出现在一串命令中；
-t或--list：列出备份文件的内容；
-z或--gzip或--ungzip：通过gzip指令压缩/解压缩文件，文件名最好为*.tar.gz；
-Z或--compress或--uncompress：通过compress指令处理备份文件；
-f<备份文件>或--file=<备份文件>：指定备份文件；
-v或--verbose：显示指令执行过程；
-r：添加文件到已经压缩的文件；
-u：添加改变了和现有的文件到已经存在的压缩文件；
-j：通过bzip2指令压缩/解压缩文件，文件名最好为*.tar.bz2；
-v：显示操作过程；
-l：文件系统边界设置；
-k：保留原有文件不覆盖；
-m：保留文件不被覆盖；
-w：确认压缩文件的正确性；
-p或--same-permissions：保留原来的文件权限与属性；
-P或--absolute-names：使用文件名的绝对路径，不移除文件名称前的“/”号；
-N <日期格式> 或 --newer=<日期时间>：只将较指定日期更新的文件保存到备份文件里；
--exclude=<范本样式>：排除符合范本样式的文件；
--remove-files：归档/压缩之后删除源文件
```
            
**参数：**
         
文件或目录：指定要打包的文件或目录列表。
            
**常用命令：**
           
1. 压缩文件，非打包。
         
```bash
# touch a.c       
# tar -czvf test.tar.gz a.c   //压缩 a.c文件为test.tar.gz
a.c
```
          
2. 列出压缩文件内容。
          
```bash
# tar -tzvf test.tar.gz 
-rw-r--r-- root/root     0 2010-05-24 16:51:59 a.c
```
         
3. 解压文件。
          
```bash
# tar -xzvf test.tar.gz 
a.c
```
         
### bzip2
>将文件压缩成bz2格式。
              
bzip2命令用于创建和管理（包括解压缩）“.bz2”格式的压缩包。
            
bzip2 采用 Burrows-Wheeler 块排序文本压缩算法和 Huffman 编码方式压缩文件。 压缩率一般比基于 LZ77/LZ78 的压缩软件好得多，其性能接近 PPM 族统计类压缩软件。
          
**语法：**
         
```html
bzip2 [ -cdfkqstvzVL123456789 ] [ filenames ...  ]
```
          
**选项：**
        
```html
-c --stdout
    # 将数据压缩或解压缩至标准输出。

-d --decompress
    # 强制解压缩。 bzip2, bunzip2 以及 bzcat 实际上是同一个程序，进行何种操作将根据程序名确定。  指定该选项后将不考虑这一机制，强制 bzip2 进行解压缩。

-z --compress
    # -d 选项的补充：强制进行压缩操作，而不管执行的是哪个程序。

-t --test
    # 检查指定文件的完整性，但并不对其解压缩。 实际上将对数据进行实验性的解压缩操作，而不输出结果。

-f --force
    # 强制覆盖输出文件。通常 bzip2 不会覆盖已经存在的文件。该选项还强制 bzip2 打破文件的硬连接，缺省情况下 bzip2 不会这么做。

-k --keep
    # 在压缩或解压缩时保留输入文件（不删除这些文件）。

-s --small
    # 在压缩、解压缩及检查时减少内存用量。采用一种修正的算法进行压缩和测试，每个数据块仅需要 2.5 个字节。这意味着任何文件都可以在 2300k
    # 的内存中进行解压缩， 尽管速度只有通常情况下的一半。

    # 在压缩时，-s将选定 200k 的块长度，内存用量也限制在 200k 左右， 代价是压缩率会降低。 总之，如果机器的内存较少（8兆字节或更少），
    # 可对所有操作都采用-s选项。参见下面的内存管理。

-q --quiet
    # 压制不重要的警告信息。属于 I/O 错误及其它严重事件的信息将不会被压制。

-v --verbose
    # 详尽模式 -- 显示每个被处理文件的压缩率。 命令行中更多的 -v 选项将增加详细的程度， 使 bzip2 显示出许多主要用于诊断目的信息。

-L --license -V --version
    # 显示软件版本，许可证条款及条件。

-1 to -9
    # 在压缩时将块长度设为 100 k、200 k ..  900 k。 对解压缩没有影响。参见下面的内存管理。

-- # 将所有后面的命令行变量看作文件名，即使这些变量以减号"-"打头。 可用这一选项处理以减号"-"打头的文件名， 例如：bzip2 -- -myfilename.

--repetitive-fast --repetitive-best
    # 这些选项在 0.9.5 及其以上版本中是多余的。 在较早的版本中，这两个选项对排序算法的行为提供了一些粗糙的控制，有些情况下很有用。 0.9.5
    # 及其以上版本采用了改进的算法而与这些选项无关。
```
                 
**参数：**
            
文件：指定要压缩的文件。
            
**常用命令：**
         
1. 解压.bz2文件。
         
```bash
[root@w3cschool.cc ~]# bzip2 -v temp.bz2 //解压文件显示详细处理信息 
```
         
2. 压缩文件。
            
```bash
[root@w3cschool.cc ~]# bzip2 -c a.c b.c c.c
```
          
3. 检查文件完整性。
           
```bash
[root@w3cschool.cc ~]# bzip2 -t temp.bz2
```
            
### gzip
>用来压缩文件。
          
gzip命令用来压缩文件。gzip是个使用广泛的压缩程序，文件经它压缩过后，其名称后面会多出“.gz”扩展名。
                  
gzip是在Linux系统中经常使用的一个对文件进行压缩和解压缩的命令，既方便又好用。gzip不仅可以用来压缩大的、较少使用的文件以节省磁盘空间，还可以和tar命令一起构成Linux操作系统中比较流行的压缩文件格式。据统计，gzip命令对文本文件有60%～70%的压缩率。减少文件大小有两个明显的好处，一是可以减少存储空间，二是通过网络传输文件时，可以减少传输的时间。
         
**语法：**
          
```html
gzip(选项)(参数)
```
           
**选项：**
               
```html
-a或——ascii：使用ASCII文字模式；
-d或--decompress或----uncompress：解开压缩文件；
-f或——force：强行压缩文件。不理会文件名称或硬连接是否存在以及该文件是否为符号连接；
-h或——help：在线帮助；
-l或——list：列出压缩文件的相关信息；
-L或——license：显示版本与版权信息；
-n或--no-name：压缩文件时，不保存原来的文件名称及时间戳记；
-N或——name：压缩文件时，保存原来的文件名称及时间戳记；
-q或——quiet：不显示警告信息；
-r或——recursive：递归处理，将指定目录下的所有文件及子目录一并处理；
-S或<压缩字尾字符串>或----suffix<压缩字尾字符串>：更改压缩字尾字符串；
-t或——test：测试压缩文件是否正确无误；
-v或——verbose：显示指令执行过程；
-V或——version：显示版本信息；
-<压缩效率>：压缩效率是一个介于1~9的数值，预设值为“6”，指定愈大的数值，压缩效率就会愈高；
--best：此参数的效果和指定“-9”参数相同；
--fast：此参数的效果和指定“-1”参数相同。
-num 用指定的数字num调整压缩的速度，-1或--fast表示最快压缩方法（低压缩比），-9或--best表示最慢压缩方法（高压缩比）。系统缺省值为6。
```
          
**参数：**
           
文件列表：指定要压缩的文件列表。
             
**常用命令：**
           
1. 压缩文件。
         
```bash
[root@runoob.com a]# ls //显示当前目录文件
a.c b.h d.cpp
[root@runoob.com a]# gzip * //压缩目录下的所有文件
[root@runoob.com a]# ls //显示当前目录文件
a.c.gz    b.h.gz    d.cpp.gz
```
           
2. 解压文件，并列出详细的信息。
        
```bash
[root@runoob.com a]# gzip -dv * //解压文件，并列出详细信息
a.c.gz:     0.0% -- replaced with a.c
b.h.gz:     0.0% -- replaced with b.h
d.cpp.gz:     0.0% -- replaced with d.cpp
```
              
3. 压缩文件，并显示压缩文件的详细信息。
          
```bash
[root@runoob.com a]# gzip -l *
     compressed    uncompressed ratio uncompressed_name
         24          0  0.0% a.c
         24          0  0.0% b.h
         26          0  0.0% d.cpp
```
         
### unrar
>解压rar文件命令，从rar档案中提取文件。
         
**语法：**
          
```html
unrar [选项][switch 命令] [文件名...][路径]
   unrar <command> [-<switch 1> -<switch N>] archive [files...] [path...]
```
          
**选项：**
            
```html
-e    #将文件解压缩到当前目录。
-l    # 列出存档内容。
-p    #将文件打印到标准输出。
-t    #测试存档文件。
-v    #详细列出存档。
-x    #使用完整路径提取文件。
```
        
**switches开关设置：**
                
```html
注意：每个开关必须用空格分隔。你不能把它们放在一起。
-av-        #禁用真实性验证检查。
-c-         #禁用评论显示
-f          #刷新文件
-kb         #保留破碎的提取文件
-ierr       #将所有消息发送给stderr。
-inul       #禁用所有消息。
-o+         #覆盖现有文件。
-o-         #不要覆盖现有文件
-p<password>    #设置密码。
-p-         #不查询密码
-r          #递归子目录。
-u          #更新文件。
-v          #列出所有卷。
-x<file>    #排除指定的文件。
-x@<list>   #排除指定列表文件中的文件。
-x@         #读取要从stdin中排除的文件名。
-y          #对所有查询都假设为是。
```
             
**参数：**
           
目录：指定要显示列表的目录，也可以是具体的文件。
          
**常用命令：**
           
1. 将压缩文件text.rar在当前目录下解压缩,并解压完整路径。
          
```bash
unrar x test.rar
```
         
### zip
>可以用来解压缩文件。
         
zip命令可以用来解压缩文件，或者对文件进行打包操作。zip是个使用广泛的压缩程序，文件经它压缩后会另外产生具有“.zip”扩展名的压缩文件。
         
**语法：**
        
```html
zip(选项)(参数)
```
        
**选项：**
          
```html
-A：调整可执行的自动解压缩文件；
-b<工作目录>：指定暂时存放文件的目录；
-c：替每个被压缩的文件加上注释；
-d：从压缩文件内删除指定的文件；
-D：压缩文件内不建立目录名称；
-f：此参数的效果和指定“-u”参数类似，但不仅更新既有文件，如果某些文件原本不存在于压缩文件内，使用本参数会一并将其加入压缩文件中；
-F：尝试修复已损坏的压缩文件；
-g：将文件压缩后附加在已有的压缩文件之后，而非另行建立新的压缩文件；
-h：在线帮助；
-i<范本样式>：只压缩符合条件的文件；
-j：只保存文件名称及其内容，而不存放任何目录名称；
-J：删除压缩文件前面不必要的数据；
-k：使用MS-DOS兼容格式的文件名称；
-l：压缩文件时，把LF字符置换成LF+CR字符；
-ll：压缩文件时，把LF+cp字符置换成LF字符；
-L：显示版权信息；
-m：将文件压缩并加入压缩文件后，删除原始文件，即把文件移到压缩文件中；
-n<字尾字符串>：不压缩具有特定字尾字符串的文件；
-o：以压缩文件内拥有最新更改时间的文件为准，将压缩文件的更改时间设成和该文件相同；
-q：不显示指令执行过程；
-r：递归处理，将指定目录下的所有文件和子目录一并处理；
-S：包含系统和隐藏文件；
-t<日期时间>：把压缩文件的日期设成指定的日期；
-T：检查备份文件内的每个文件是否正确无误；
-u：更换较新的文件到压缩文件内；
-v：显示指令执行过程或显示版本信息；
-V：保存VMS操作系统的文件属性；
-w：在文件名称里假如版本编号，本参数仅在VMS操作系统下有效；
-x<范本样式>：压缩时排除符合条件的文件；
-X：不保存额外的文件属性；
-y：直接保存符号连接，而非该链接所指向的文件，本参数仅在UNIX之类的系统下有效；
-z：替压缩文件加上注释；
-$：保存第一个被压缩文件所在磁盘的卷册名称；
-<压缩效率>：压缩效率是一个介于1~9的数值。
```
           
**参数：**
         
- zip压缩包：指定要创建的zip压缩包。
- 文件列表：指定要压缩的文件列表。
               
**常用命令：**

1. 将 /home/html/ 这个目录下所有文件和文件夹打包为当前目录下的 html.zip。
           
```bash
zip -q -r html.zip /home/html
```
         
2. 如果在我们在 /home/html 目录下，可以执行以下命令：
            
```bash
zip -q -r html.zip *
```
          
3. 从压缩文件cp.zip中删除文件a.c。
          
```bash
zip -dv cp.zip a.cs
```